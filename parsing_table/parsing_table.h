#ifndef LLTABLE_H
#define LLTABLE_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>
#include <ctype.h>

enum Terminal {
    T_ID                    = 0,        /**<  Identifikátor  */
    T_IMPORT                = 1,        /**<  Klíčové slovo "@import"  */
    T_IFJ                   = 2,        /**<  Klíčové slovo "ifj"  */
    T_PUB                   = 3,        /**<  Klíčové slovo "pub"  */
    T_FN                    = 4,        /**<  Klíčové slovo "fn"  */
    T_CONST                 = 5,        /**<  Klíčové slovo "const"  */
    T_VAR                   = 6,        /**<  Klíčové slovo "var"  */
    T_IF                    = 7,        /**<  Klíčové slovo "if"  */
    T_ELSE                  = 8,        /**<  Klíčové slovo "else"  */
    T_WHILE                 = 9,        /**<  Klíčové slovo "while"  */
    T_RETURN                = 10,       /**<  Klíčové slovo "return"  */
    T_ASSIGNMENT            = 11,       /**<  Operátor přiřazení "="  */
    T_PLUS                  = 12,       /**<  Operátor součtu "+"  */
    T_MINUS                 = 13,       /**<  Operátor rozdílu "-"  */
    T_MULTIPLICATION        = 14,       /**<  Operátor součinu "*"  */
    T_DIVISION              = 15,       /**<  Operátor podílu "/"  */
    T_IDENTITY              = 16,       /**<  Operátor rovnosti "=="  */
    T_NOT_EQUAL             = 17,       /**<  Operátor nerovnosti "!="  */
    T_LESS_THAN             = 18,       /**<  Operátor menší než "<"  */
    T_GREATER_THAN          = 19,       /**<  Operátor větší než ">"  */
    T_LESS_THAN_OR_EQUAL    = 20,       /**<  Operátor menší rovno "<="  */
    T_GREATER_THAN_OR_EQUAL = 21,       /**<  Operátor větší rovno ">=""  */
    T_INT                   = 22,       /**<  Klíčové slovo "i32"  */
    T_INT_OR_NULL           = 23,       /**<  Klíčové slovo "?i32"  */
    T_FLOAT                 = 24,       /**<  Klíčové slovo "f64"  */
    T_FLOAT_OR_NULL         = 25,       /**<  Klíčové slovo "?f64"  */
    T_STRING                = 26,       /**<  Klíčové slovo "[]u8"  */
    T_STRING_OR_NULL        = 27,       /**<  Klíčové slovo "?[]u8"  */
    T_VOID                  = 28,       /**<  Klíčové slovo "void"  */
    T_INT_LITERAL           = 29,       /**<  Literál typu i32  */
    T_FLOAT_LITERAL         = 30,       /**<  Literál typu i64  */
    T_STRING_LITERAL        = 31,       /**<  Literál typu []u8  */
    T_NULL_LITERAL          = 32,       /**<  Literál typu NULL  */
    T_DOT                   = 33,       /**<  Symbol tečky "."  */
    T_COMMA                 = 34,       /**<  Symbol čárky ","  */
    T_COLON                 = 35,       /**<  Symbol dvojtečky ":"  */
    T_SEMICOLON             = 36,       /**<  Symbol středníku ";"  */
    T_PIPE                  = 37,       /**<  Symbol svislice "|"  */
    T_RIGHT_BRACKET         = 38,       /**<  Symbol pravé závorky ")"  */
    T_LEFT_BRACKET          = 39,       /**<  Symbol levé závorky "("  */
    T_RIGHT_CURLY_BRACKET   = 40,       /**<  Symbol pravé složené závorky "}"  */
    T_LEFT_CURLY_BRACKET    = 41,       /**<  Symbol levé složené závorky "{"  */
    T_EOF                   = 42,       /**<  Signalizace, že nastal konec souboru  */
    T_EPSILON               = 43,       /**<  Prázdný řetězec "epsilon"  */
};

#define TERMINAL_COUNT 44       /**<  Celkový počet terminálů v LL tabulce.*/
#define NON_TERMINAL_COUNT 40   /**<  Celkový počet neterminálů v LL tabulce.*/

size_t symtable_hashFunction(char *key) {
    size_t hash = 5381;
    for(char *i = key; *i; i++) {
        hash = ((hash << 5) + hash) + *i;
    }
    return hash;
}



typedef struct col {
    size_t key;
    int value[NON_TERMINAL_COUNT];
} col_t;


col_t table[TERMINAL_COUNT] = {
	{5862297ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{5862386ULL, {-1, -1, -1, -1, 5, 7, 10, 8, -1, -1, 19, 22, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 62, -1, 68, 70, -1, -1}},
	{5862388ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 19, 23, -1, -1, -1, -1, -1, -1, 34, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{193453740ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{193454815ULL, {-1, -1, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{193458878ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 33, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 63, -1, 68, 70, -1, -1}},
	{193459152ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 13, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{193466988ULL, {-1, -1, 2, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{193472878ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 19, 21, -1, 26, 27, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{6384006126ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{6384398067ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 35, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{6384401513ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 53, 55, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{6384619991ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 12, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{210669930912ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 29, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{210669931922ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 45, -1, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, 71, -1}},
	{210669933228ULL, {0, 1, -1, -1, -1, -1, -1, -1, -1, -1, 19, 21, -1, 26, 28, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{210672383965ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 31, -1, -1, 30, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{210673383675ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{210681576881ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 53, 56, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{210693394398ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 19, 24, -1, -1, -1, -1, -1, -1, -1, -1, -1, 38, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{6952140092538ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 58, 61, -1, 67, -1, -1, -1, -1}},
	{6952683186021ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 19, 25, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 39, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{6952740025148ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 17, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{229422184920831ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{7571279246261765ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 58, 60, -1, 67, -1, -1, -1, -1}},
	{249835319716925268ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{249850135850301702ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 48, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{249853376582133037ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 47, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{249859972537086990ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 41, -1, -1, 45, -1, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{1259126739841280167ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 64, -1, 68, 70, -1, 74}},
	{1259126744081274805ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 16, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{7284415067109582773ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 32, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 65, 66, 68, 70, -1, -1}},
	{9421056868997489328ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 51, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{12551658098835327432ULL, {-1, -1, -1, -1, 6, -1, -1, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 45, -1, -1, 54, -1, -1, 59, -1, -1, 67, 69, -1, 72, -1}},
	{13357759252997927383ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 46, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{13513236659805563001ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 49, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{13828205768324589692ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 64, -1, 68, 70, -1, 73}},
	{13828205772564584330ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 14, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{13871966970720415084ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 64, -1, 68, 70, -1, 76}},
	{14265960969046774760ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 40, 42, 43, -1, -1, 52, -1, -1, 57, -1, -1, 64, -1, 68, 70, -1, 75}},
	{14265960973286769398ULL, {-1, -1, -1, -1, -1, -1, -1, -1, 11, 18, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{14898862961759019485ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 44, 50, -1, 54, -1, -1, 59, -1, -1, 67, -1, -1, -1, -1}},
	{15940418408625531884ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 20, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}},
	{16850163782960150809ULL, {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 36, 37, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}}
};


int find(int nt, char *str) {
    size_t hash = symtable_hashFunction(str);
    int left = 0;
    int right = TERMINAL_COUNT - 1;
    int mid;
    while(left <= right) {
        mid = (left + right) / 2;
        if(table[mid].key == hash) {
            return table[mid].value[nt];
        }
        if(table[mid].key < hash) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }
    // Něco je hodně špatně - terminál není v tabulce
    return -2;
}

#endif // LLTABLE_H
